<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Typare â€” compare glyphs to explore typefaces</title>
<style type="text/css">
  html, body, .wrapper { height: 100%; }
  body, .toolbar-form, .toolbar-form-fieldset, .toolbar-input, .author,
  .panel-right, .layers-panel, .layer-preview
    { margin: 0; padding: 0; }

  body {
    color: Coral;
    font-family: Times;
    text-rendering: geometricPrecision;
  }

  .clfx:before, .clfx:after { content: " "; display: table; }
  .clfx:after { clear: both; }

  .toolbar { position: fixed; width: 100%; z-index: 100; }
  .toolbar-form, .toolbar-form-fieldset { text-align: center; border: none; }
  .toolbar-input {
    padding: 20px 5px;
    font-family: inherit;
    font-size: 18px;
    color: inherit;
    background-color: rgba(255, 255, 255, .75);
    text-align: center;
    outline: none !important;
    border: none;
    -webkit-transition: all 0.4s;
       -moz-transition: all 0.4s;
            transition: all 0.4s;
  }
  .toolbar-input:hover {
    background-color: rgba(255, 250, 240, .95);
    color: inherit;
  }
  .toolbar-input:active,
  .toolbar-input:focus {
    background-color: Coral;
    color: white;
  }
  .toolbar-input::-webkit-input-placeholder {
    color: MistyRose;
  }
  .toolbar-input:focus::-webkit-input-placeholder {
    color: white;
  }

  .panel-right {
    display: table;
    position: fixed;
    width:  60px;
    top:    80px;
    right:  0;
    bottom: 80px;
    margin-top: auto;
    margin-bottom: auto;
    z-index: 101;
  }
  .layers-panel {
    display: table-cell;
    vertical-align: middle;
  }
  .layer-preview-item {
    float: left;
    list-style-type: none;
    text-align: center;
  }
  .layer-preview {
    display: block;
    width:  60px;
    padding: 20px 0;
    color: inherit;
    text-decoration: none;
    background-color: rgba(255, 255, 255, .75);
  }
  .layer-preview:hover {
    background-color: rgba(255, 250, 240, .95);
  }

  .content {
    height: 100%;
    -webkit-user-select: none;
       -moz-user-select: none;
            user-select: none;
    cursor: default;
  }
  .content-letters {
    font-size: 540px;
  }
  .content-letter {
    width: 100%;
    position: absolute;
    left: 50%;
    top:  10%;
    margin-left: -50%;
    text-align: center;
    opacity: .5;
  }

  .layer-0 { color: Tomato; }
  .layer-1 { color: Teal; }
  .layer-2 { color: MediumSlateBlue; }
  .layer-3 { color: LimeGreen; }
  .layer-4 { color: RoyalBlue; }
  .layer-5 { color: DarkGoldenRod; }
  .layer-6 { color: DarkSeaGreen; }
  .layer-7 { color: HotPink; }
  .layer-8 { color: YellowGreen; }
  .layer-9 { color: LightSlateGray; }

  .author {
    position: fixed;
    bottom: 10px;
    right:  10px;
    font-size: 13px;
    color: inherit;
    text-decoration: none;
  }
  .author:hover { color: Tomato; }

</style>
</head>
<body>
  <div id="wrapper" class="wrapper">

    <div class="toolbar">
      <form class="toolbar-form">
        <fieldset class="toolbar-form-fieldset">
          <input
            id="input-font-name"
            class="toolbar-input input-font-name"
            type="text"
            placeholder="Font Name"
          ><input
            id="input-letters"
            class="toolbar-input input-letters"
            type="text"
            placeholder="Letters"
          >
        </fieldset>
      </form>
    </div>

    <div id="panel-right" class="panel-right">
      <!--ol class="layers-panel">
        <li class="layer-preview-item">
          <a class="layer-preview layer-1" href="#">O</a></li>
        <li class="layer-preview-item">
          <a class="layer-preview layer-0" href="#">H</a></li>
      </ol-->
    </div>

    <div class="content">
      <div id="content-letters" class="content-letters"></div>
    </div>

    <a
      class="author"
      href="https://twitter.com/romanshamin"
      target="_blank">Roman&nbsp;Shamin</a>
  </div>

<script type="text/javascript">


var DOM = (function() {
  var id = function(s) {
    if (!id.storage) id.storage = {};
    return id.storage[s] = id.storage[s] || document.querySelector(s);
  }
  return { id : id}
})();


var helpers = (function() {

  var isArray = function(o) {
    return Object.prototype.toString.call(o) === '[object Array]';
  }

  var wrapStrInTag = function(str, tag, options) {
    var
      tagOpenBegin = '<' + tag,
      tagOpenEnd   = '>',
      tagEnd       = '</' + tag + '>',
      htmlStr      = '' + tagOpenBegin,
      concatWithSpace, keyPropToStr;

    concatWithSpace = function(a, b) { return a + ' ' + b }

    keyPropToStr = function(k, p) {
      var p_str = isArray(p) ? p.reduce(concatWithSpace) : p;
      return ' ' + k + '="' + p_str + '"'
    }

    for (key in options) htmlStr += keyPropToStr(key, options[key])

    return htmlStr += tagOpenEnd + str + tagEnd
  }

  return {
    isArray      : isArray,
    wrapStrInTag : wrapStrInTag
  }
})();


var app = (function() {


  var
    config = {
      defFontName: 'Times',
      defLetters:  'HO'
    },
    init, lettersToHtml, updateFontFaceStyle, updateLetters,
    updateLayersPanel;


  lettersToHtml = function(letterString) {
    var
      htmlString = '';

    for (var i = 0, l = letterString.length; i < l; i++) {
      htmlString += helpers.wrapStrInTag(letterString[i], 'span', {
        id: 'layer-' + i,
        class: [ 'content-letter', 'layer-' + i ]
      })
    }

    return htmlString;
  }


  updateFontFaceStyle = function() {
    document.body.style.fontFamily = DOM.id('#input-font-name').value;
  }


  updateLayersPanel = function(letters) {
    var html = '';

    //letters = letters.split('').reverse().join('');

    for (var i = letters.length - 1; i >= 0; i--)
      html += helpers.wrapStrInTag(
        helpers.wrapStrInTag(
          letters[i], 'a', {
            id: 'layer-preview-' + i,
            class: ['layer-preview', 'layer-' + i],
            href: '#' }),
        'li', { class: 'layer-preview-item' })

    html = helpers.wrapStrInTag(html, 'ol', { class: 'layers-panel' });

    DOM.id('#panel-right').innerHTML = html;
  }


  updateLetters = function() {
    var letters = DOM.id('#input-letters').value;

    DOM.id('#content-letters').innerHTML =
      lettersToHtml(letters);

    updateLayersPanel(letters);
  }


  init = function () {
    DOM.id('#input-font-name').value = config.defFontName;
    DOM.id('#input-letters').value = config.defLetters;

    DOM.id('#content-letters').innerHTML = lettersToHtml(config.defLetters);
    updateLayersPanel(config.defLetters);

    DOM.id('#input-font-name').addEventListener('input', updateFontFaceStyle);
    DOM.id('#input-letters').addEventListener('input', updateLetters);
  }


  return { init : init}
})();


(function() { window.onload = function() { app.init(); } }).call();


</script>
</body>
</html>
